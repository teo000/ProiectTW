<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
    <link  href="/bookpage.css" rel="stylesheet">
    <link rel="stylesheet" href="navigation.css">

    <title>Boo!</title>
</head>


<body>

<!--de adaugat loc unde sa dai review-->
<!--OBLIGATORIU: specificarea progresului cand dai click pe currently reading-->
<!--de pus an la carti ??-->
<!--vreau chestiile din stanga oleaca mai mari si daca se poate sa stea nemiscate cand dai scroll da aia nush cum fac-->

<div id="wrapper-div">
    <div id="navigation-div">
        <nav>
            <div id="toggle-menu">

                <a href="#" class="toggle-button">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </a>
                <div id="dropdown-menu">
                    <div class="menu-buttons">
                        <a class="active"  href="javascript:void(0);" onclick="navigateToPage('homepage')">Home</a>
                        <a class="active"  href="javascript:void(0);" onclick="navigateToPage('mybooks')">My Books</a>
                        <div class="hoverable">

                            <a class="active" href="#">Categories</a>
                            <div class="hamburger-double-dropdown">
                                <a href="javascript:void(0);" onclick="navigateToGenre('romance')">Romance</a>
                                <a href="javascript:void(0);" onclick="navigateToGenre('biography')">Biography</a>
                                <a href="javascript:void(0);" onclick="navigateToGenre('crime')">Crime</a>
                                <a  href="javascript:void(0);"onclick="navigateToGenre('fiction')">Fiction</a>
                                <a  href="javascript:void(0);" onclick="navigateToGenre('historical fiction')">Historical Fiction</a>
                                <a href="javascript:void(0);" onclick="navigateToGenre('self help')">Self Help</a>
                                <a href="javascript:void(0);" onclick="navigateToGenre('young adult')">Young Adult</a>
                            </div>
                        </div>
                        <a class="active" href="javascript:void(0);" onclick="navigateToMyGroups">My Groups</a>
                        <div class="hoverable">

                            <a class="active" href="#">More</a>
                            <div class="hamburger-double-dropdown">
                                <a href="javascript:void(0);" onclick="navigateToPage('userpage')">Profile</a>
                                <a href="javascript:void(0);" onclick="navigateToPage('about')">About</a>
                                <a href="javascript:void(0);" onclick="navigateToPage('help')">Help</a>
                                <a href="javascript:void(0);" onclick="logout()">Log Out</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="buttons">
                <a class="logo" href="javascript:void(0);" onclick="navigateToPage('homepage')"><img src="boo.png"
                                                                                                     alt="Ghost reading a book"></a>
                <a class="active"  href="javascript:void(0);" onclick="navigateToPage('homepage')">Home</a>
                <a class="active"  href="javascript:void(0);" onclick="navigateToPage('mybooks')">My Books</a>
                <div class="dropdown">
                    <button class="dropDownButton">Categories</button>
                    <div class="dropdown-categories">
                        <a href="javascript:void(0);" onclick="navigateToGenre('romance')">Romance</a>
                        <a href="javascript:void(0);" onclick="navigateToGenre('biography')">Biography</a>
                        <a href="javascript:void(0);" onclick="navigateToGenre('crime')">Crime</a>
                        <a  href="javascript:void(0);"onclick="navigateToGenre('fiction')">Fiction</a>
                        <a  href="javascript:void(0);" onclick="navigateToGenre('historical fiction')">Historical Fiction</a>
                        <a href="javascript:void(0);" onclick="navigateToGenre('self help')">Self Help</a>
                        <a href="javascript:void(0);" onclick="navigateToGenre('young adult')">Young Adult</a>
                    </div>
                </div>
                <a class="active" href="javascript:void(0);" onclick="navigateToMyGroups()">My Groups</a>
                <div class="dropdown">
                    <button class="dropDownButton">More</button>
                    <div class="dropdown-categories">
                        <a href="javascript:void(0);" onclick="navigateToPage('userpage')">Profile</a>
                        <a href="javascript:void(0);" onclick="navigateToPage('about')">About</a>
                        <a href="javascript:void(0);" onclick="navigateToPage('help')">Help</a>
                        <a href="javascript:void(0);" onclick="logout()">Log Out</a>
                    </div>
                </div>

            </div>
            <div id="search-bar">
                <input type="text" placeholder="Search...">
            </div>
        </nav>
    </div>

    <div id = "content-wrapper">
        <div id="book-cover-div">
            <div id = "book-cover">
                <img  src="<%= book.coverimg %>" alt="Book cover">
            </div>

            <button type="button" id="read-button"  <% if (book.shelf==='Read') { %>class="active"<% } %>> Read </button>
            <button type="button" id="currently-button"  <% if (book.shelf==='Currently Reading') { %>class="active"<% } %>> Currently reading </button>
            <button type="button" id="want-button"  <% if (book.shelf==='Want to Read') { %>class="active"<% } %>> Want to read </button>

            <div id="adjustable-rating">
                <input type="radio"  name="stars" id="star-5" value="5">
                <label for="star-5"></label>

                <input type="radio" name="stars" id="star-4" value="4" >
                <label for="star-4"></label>

                <input type="radio" name="stars" id="star-3" value="3" >
                <label for="star-3"></label>

                <input type="radio" name="stars" id="star-2" value="2" >
                <label for="star-2"></label>

                <input type="radio" name="stars" id="star-1" value="1">
                <label for="star-1"></label>
            </div>


        </div>

        <div id="content-div">
            <div id = "book-description">
                <p id="title">
                    <%= book.title %>
                </p>

                <p id="author">
                   <a href="javascript:void(0);" onclick="navigateToAuthor('<%=book.author%>')"> <%= book.author %></a>
                </p>

                <div class="rating-box">
                    <div class="preset-rating">
                        <div class="empty-stars"></div>
                        <div class="full-stars" style="width: <%= book.avgrating * 20 %>%"></div>
                    </div>
                    <p>
                        <%= book.avgrating %>
                    </p>
                    <p id = "user-rating" style = "display:none"><%= book.rating%></p>
                </div>
                <p id="description">
                    <%= book.description %>
                </p>
                    <div class="genres">
                        <p class="genre"> Genres: </p>

                        <div class="genre-tags">
                            <% genres.forEach(function(genre) { %>
                            <a  href="javascript:void(0);" onclick="navigateToGenre('<%= genre.name %>')"><%= genre.name %>  </a>
                                <% }); %>
                        </div>

                    </div>
                <style>
                    .bookId p {
                        margin-bottom: 5px;
                    }
                </style>

                <div class="bookId">
                    <p id="bookId">BookId : <%= book.id %></p>
                    <p id="publisher">Publisher:
                        <% if (book.publisher) { %>
                            <a href="javascript:void(0);" onclick="navigateToPublisher('<%= book.publisher %>')"><%= book.publisher %></a>
                        <% } else { %>
                            -
                        <% } %>
                    </p>
                    <p id="edition">Edition:
                        <% if (book.edition) { %>
                           <a  href="javascript:void(0);" onclick="navigateToEdition('<%= book.edition %>')"><%= book.edition %></a>
                        <% } else { %>
                            -
                        <% } %>
                    </p>
                    <p id="year">Year:
                        <% if (book.year) { %>
                            <a href="javascript:void(0);" onclick="navigateToYear('<%= book.year %>')"><%= book.year %></a>
                        <% } else { %>
                            -
                        <% } %>
                    </p>
                </div>



            </div>
            <hr>
            <!--not templatized yet-->
           <!-- <p class="sub-title"> Readers also enjoyed...</p>
            <div class="other-books">
                <div class="book">
                    <div class="small-cover">
                        <img src="../public/images/great-gatsby.jpg" alt="Book cover">
                    </div>
                    <p class="small-title">The Great Gatsby</p>
                    <p class="small-author">F. Scott Fitzgerald</p>

                </div>

                <div class="book">
                    <div class="small-cover">
                        <img src="../public/images/wuthering-heights.jpg" alt="Book cover">
                    </div>
                    <p class="small-title">Wuthering Heights</p>
                    <p class="small-author">Emily Brontë</p>

                </div>
            </div>
            <hr>-->

            <p class="sub-title"> Ratings and Reviews : <%= reviews.length%> </p>
            <div id="feed-div">
                <% reviews.forEach(function(review) { %>
                <div class="post-container">
                    <!--aici putem pune poza userului-->
                    <div class="user-profile">
                        <p><%=review.username%></p>
                        <span><%=review.date%> </span>
                    </div>

                    <div class="rating-box">
                        <div class="preset-rating">
                            <div class="empty-stars"></div>
                            <div class="full-stars" style="width: <%= review.stars * 20 %>%"></div>
                        </div>
                    </div>

                    <p class="post-text">"I Rated <a href="javascript:void(0);" onclick="navigateToBook('<%= review.title %>')" class="book-title"><%=review.title%></a> by <a
                                href="javascript:void(0);" onclick="navigateToBook('<%= review.author %>')" class="book-author"><%=review.author%></a> <%=review.stars%>
                        stars!"
                    </p>
                    <% if (!review.isgeneric || review.isgeneric === null) { %>
                    <p class = post-text>
                        <%=review.content%>
                    </p>
                    <% } %>
                </div>
                    <% }); %>
                <div class = "write_review_container">

                    <textarea class="comment-input" id = "review-text" type="text" placeholder="Write a review..."></textarea>
                    <button class = "add-review-button">Add Review</button>

                </div>
            </div>
        </div>

    </div>
    <footer id = "main-footer">
        <p>&copy; Proiect realizat de Savin Miruna si Tudurache Teodora, 2023, Tehnologii Web</p>
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script defer src = "bookpage.js"></script>
<script src="comments_and_likes.js"></script>
<script src ="navigationLinks.js"></script>
</body>
</html>